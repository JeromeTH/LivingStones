{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const JoinGame=()=>{const{id}=useParams();const navigate=useNavigate();const[game,setGame]=useState(null);const[error,setError]=useState(null);useEffect(()=>{const fetchGame=async()=>{try{const response=await fetch(window.location.origin+\"/livingstonesapp/game/\".concat(id,\"/\"));if(!response.ok){throw new Error('Failed to fetch game information');}const data=await response.json();setGame(data);}catch(error){setError(error.message);}};fetchGame();},[id]);const joinGame=async()=>{const token=sessionStorage.getItem('token');try{const response=await fetch(window.location.origin+\"/livingstonesapp/game/\".concat(id,\"/join/\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});if(!response.ok){throw new Error('Failed to join the game');}navigate(\"/game/\".concat(id));}catch(error){setError(error.message);}};if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error]});}if(!game){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Join Game\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Game ID: \",game.id]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Game Name: \",game.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Creator: \",game.creator.username]}),/*#__PURE__*/_jsx(\"button\",{onClick:joinGame,children:\"Join Game\"})]});};export default JoinGame;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","jsxs","_jsxs","jsx","_jsx","JoinGame","id","navigate","game","setGame","error","setError","fetchGame","response","fetch","window","location","origin","concat","ok","Error","data","json","message","joinGame","token","sessionStorage","getItem","method","headers","children","name","creator","username","onClick"],"sources":["/Users/jerometh/PycharmProjects/LivingStones/frontend/src/components/JoinGame/JoinGame.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\n\nconst JoinGame = () => {\n    const { id } = useParams();\n    const navigate = useNavigate();\n    const [game, setGame] = useState(null);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        const fetchGame = async () => {\n            try {\n                const response = await fetch(window.location.origin + `/livingstonesapp/game/${id}/`);\n                if (!response.ok) {\n                    throw new Error('Failed to fetch game information');\n                }\n                const data = await response.json();\n                setGame(data);\n            } catch (error) {\n                setError(error.message);\n            }\n        };\n\n        fetchGame();\n    }, [id]);\n\n    const joinGame = async () => {\n        const token = sessionStorage.getItem('token');\n        try {\n            const response = await fetch(window.location.origin + `/livingstonesapp/game/${id}/join/`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${token}`\n                }\n            });\n\n            if (!response.ok) {\n                throw new Error('Failed to join the game');\n            }\n\n            navigate(`/game/${id}`);\n        } catch (error) {\n            setError(error.message);\n        }\n    };\n\n    if (error) {\n        return <div>Error: {error}</div>;\n    }\n\n    if (!game) {\n        return <div>Loading...</div>;\n    }\n\n    return (\n        <div>\n            <h1>Join Game</h1>\n            <p>Game ID: {game.id}</p>\n            <p>Game Name: {game.name}</p>\n            <p>Creator: {game.creator.username}</p>\n            <button onClick={joinGame}>Join Game</button>\n        </div>\n    );\n};\n\nexport default JoinGame;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}