{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import\"./JoinGame.css\";import Header from\"../Header/Header\";import Footer from\"../Elements/Footer\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const JoinGame=()=>{const{id}=useParams();const navigate=useNavigate();const[game,setGame]=useState(null);const[error,setError]=useState(null);useEffect(()=>{const fetchGame=async()=>{try{const response=await fetch(window.location.origin+\"/livingstonesapp/game/\".concat(id,\"/\"));if(!response.ok){throw new Error('Failed to fetch game information');}const data=await response.json();setGame(data);console.log(data);}catch(error){setError(error.message);}};fetchGame();},[id]);const joinGame=async()=>{const token=sessionStorage.getItem('token');try{const response=await fetch(window.location.origin+\"/livingstonesapp/game/\".concat(id,\"/join/\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});if(!response.ok){throw new Error('Failed to join the game');}navigate(\"/game/\".concat(id));}catch(error){setError(error.message);}};if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error]});}if(!game){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"join-game-container\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"join-game\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Game ID: \",game.id]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Game Name: \",game.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Creator: \",game.creator.username]}),/*#__PURE__*/_jsx(\"button\",{className:\"button-large\",onClick:joinGame,children:\"Join Game\"})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default JoinGame;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Header","Footer","jsxs","_jsxs","jsx","_jsx","JoinGame","id","navigate","game","setGame","error","setError","fetchGame","response","fetch","window","location","origin","concat","ok","Error","data","json","console","log","message","joinGame","token","sessionStorage","getItem","method","headers","children","className","name","creator","username","onClick"],"sources":["/Users/jerometh/PycharmProjects/LivingStones/frontend/src/components/JoinGame/JoinGame.jsx"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport {useParams, useNavigate} from 'react-router-dom';\nimport \"./JoinGame.css\"\nimport Header from \"../Header/Header\";\nimport Footer from \"../Elements/Footer\";\n\nconst JoinGame = () => {\n    const {id} = useParams();\n    const navigate = useNavigate();\n    const [game, setGame] = useState(null);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        const fetchGame = async () => {\n            try {\n                const response = await fetch(window.location.origin + `/livingstonesapp/game/${id}/`);\n                if (!response.ok) {\n                    throw new Error('Failed to fetch game information');\n                }\n                const data = await response.json();\n                setGame(data);\n                console.log(data);\n            } catch (error) {\n                setError(error.message);\n            }\n        };\n\n        fetchGame();\n    }, [id]);\n\n    const joinGame = async () => {\n        const token = sessionStorage.getItem('token');\n        try {\n            const response = await fetch(window.location.origin + `/livingstonesapp/game/${id}/join/`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${token}`\n                }\n            });\n\n            if (!response.ok) {\n                throw new Error('Failed to join the game');\n            }\n\n            navigate(`/game/${id}`);\n        } catch (error) {\n            setError(error.message);\n        }\n    };\n\n    if (error) {\n        return <div>Error: {error}</div>;\n    }\n\n    if (!game) {\n        return <div>Loading...</div>;\n    }\n\n    return (\n        <div className={\"join-game-container\"}>\n            <Header/>\n            <div className={\"join-game\"}>\n                <p>Game ID: {game.id}</p>\n                <p>Game Name: {game.name}</p>\n                <p>Creator: {game.creator.username}</p>\n                <button className={\"button-large\"} onClick={joinGame}>Join Game</button>\n            </div>\n            <Footer/>\n        </div>\n    );\n};\n\nexport default JoinGame;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}