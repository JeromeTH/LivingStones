{"ast":null,"code":"import React,{useState}from'react';import\"./Login.css\";import Header from'../Header/Header';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=_ref=>{let{onClose}=_ref;const[userName,setUserName]=useState(\"\");const[password,setPassword]=useState(\"\");const[open,setOpen]=useState(true);let login_url=window.location.origin+\"/api/token/\";const login=async e=>{e.preventDefault();const res=await fetch(login_url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({\"userName\":userName,\"password\":password})});const json=await res.json();if(json.status!=null&&json.status===\"Authenticated\"){sessionStorage.setItem('username',json.userName);localStorage.setItem('token',json.access);setOpen(false);}else{alert(\"The user could not be authenticated.\");}};if(!open){window.location.href=\"/\";}return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\"login-modal\",onClick:onClose,children:/*#__PURE__*/_jsx(\"div\",{onClick:e=>{e.stopPropagation();},className:\"modalContainer\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"login_panel\",onSubmit:login,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"input_field\",children:\"Username \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",placeholder:\"Username\",className:\"input_field\",onChange:e=>setUserName(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"input_field\",children:\"Password \"}),/*#__PURE__*/_jsx(\"input\",{name:\"psw\",type:\"password\",placeholder:\"Password\",className:\"input_field\",onChange:e=>setPassword(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{className:\"action_button\",type:\"submit\",value:\"Login\"}),/*#__PURE__*/_jsx(\"input\",{className:\"action_button\",type:\"button\",value:\"Cancel\",onClick:()=>setOpen(false)})]}),/*#__PURE__*/_jsx(\"a\",{className:\"loginlink\",href:\"/register\",children:\"Register Now\"})]})})})]});};export default Login;","map":{"version":3,"names":["React","useState","Header","jsx","_jsx","jsxs","_jsxs","Login","_ref","onClose","userName","setUserName","password","setPassword","open","setOpen","login_url","window","location","origin","login","e","preventDefault","res","fetch","method","headers","body","JSON","stringify","json","status","sessionStorage","setItem","localStorage","access","alert","href","className","children","onClick","stopPropagation","onSubmit","type","name","placeholder","onChange","target","value"],"sources":["/Users/jerometh/PycharmProjects/LivingStones/frontend/src/components/Login/Login.jsx"],"sourcesContent":["import React, {useState} from 'react';\nimport \"./Login.css\";\nimport Header from '../Header/Header';\n\nconst Login = ({onClose}) => {\n    const [userName, setUserName] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [open, setOpen] = useState(true);\n\n    let login_url = window.location.origin + \"/api/token/\";\n\n    const login = async (e) => {\n        e.preventDefault();\n\n        const res = await fetch(login_url, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n                \"userName\": userName,\n                \"password\": password\n            }),\n        });\n\n        const json = await res.json();\n        if (json.status != null && json.status === \"Authenticated\") {\n            sessionStorage.setItem('username', json.userName);\n            localStorage.setItem('token', json.access);\n            setOpen(false);\n\n        } else {\n            alert(\"The user could not be authenticated.\");\n        }\n    };\n\n    if (!open) {\n        window.location.href = \"/\";\n    }\n\n    return (\n        <div className=\"login-container\">\n            <Header/>\n            <div className=\"login-modal\" onClick={onClose}>\n                <div\n                    onClick={(e) => {\n                        e.stopPropagation();\n                    }}\n                    className='modalContainer'\n                >\n                    <form className=\"login_panel\" onSubmit={login}>\n                        <div>\n                            <span className=\"input_field\">Username </span>\n                            <input type=\"text\" name=\"username\" placeholder=\"Username\" className=\"input_field\"\n                                   onChange={(e) => setUserName(e.target.value)}/>\n                        </div>\n                        <div>\n                            <span className=\"input_field\">Password </span>\n                            <input name=\"psw\" type=\"password\" placeholder=\"Password\" className=\"input_field\"\n                                   onChange={(e) => setPassword(e.target.value)}/>\n                        </div>\n                        <div>\n                            <input className=\"action_button\" type=\"submit\" value=\"Login\"/>\n                            <input className=\"action_button\" type=\"button\" value=\"Cancel\"\n                                   onClick={() => setOpen(false)}/>\n                        </div>\n                        <a className=\"loginlink\" href=\"/register\">Register Now</a>\n                    </form>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}