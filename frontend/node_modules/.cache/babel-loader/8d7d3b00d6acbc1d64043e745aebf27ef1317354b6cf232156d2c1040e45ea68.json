{"ast":null,"code":"// CreateGame.jsx\nimport React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import Modal from\"../Elements/Modal\";import Panel from\"../Elements/Panel\";import\"./CreateGame.css\";import Header from\"../Header/Header\";import Footer from\"../Elements/Footer\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CreateGame=()=>{const[npcName,setNPCName]=useState('');const[showModal,setShowModal]=useState(false);const[bloodLevel,setBloodLevel]=useState('');const navigate=useNavigate();const[npcList,setNPCList]=useState([]);const[selectedNPC,setSelectedNPC]=useState(null);useEffect(()=>{const fetchNPCs=async()=>{const response=await fetch(window.location.origin+'/livingstonesapp/npcs');const data=await response.json();console.log(data);setNPCList(data);};fetchNPCs();},[]);const createGame=async event=>{event.preventDefault();const token=sessionStorage.getItem('token');// Retrieve the JWT token\nconsole.log(token);const response=await fetch(window.location.origin+'/livingstonesapp/create-game',{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({npc:{name:npcName,current_blood:bloodLevel}})});if(response.ok){const data=await response.json();navigate(\"/game/\".concat(data.id,\"/join\"));}else{const errorDetails=await response.json();console.error('Error in creating game:',errorDetails.message);}console.log('Game created:',{npcName,bloodLevel});setShowModal(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"create-game-container\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"button\",{className:\"button-large\",onClick:()=>setShowModal(true),children:\"Create Game\"}),/*#__PURE__*/_jsx(Modal,{show:showModal,onClose:()=>setShowModal(false),children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:createGame,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Select NPC:\",/*#__PURE__*/_jsxs(\"select\",{value:selectedNPC,onChange:e=>setSelectedNPC(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select an NPC\"}),npcList.map(npc=>/*#__PURE__*/_jsxs(\"option\",{value:npc.id,children:[npc.name,\" (Blood Level: \",npc.current_blood,\")\"]},npc.id))]})]})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Create Game\"})]})}),/*#__PURE__*/_jsx(Footer,{})]});};export default CreateGame;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","Modal","Panel","Header","Footer","jsx","_jsx","jsxs","_jsxs","CreateGame","npcName","setNPCName","showModal","setShowModal","bloodLevel","setBloodLevel","navigate","npcList","setNPCList","selectedNPC","setSelectedNPC","fetchNPCs","response","fetch","window","location","origin","data","json","console","log","createGame","event","preventDefault","token","sessionStorage","getItem","method","headers","concat","body","JSON","stringify","npc","name","current_blood","ok","id","errorDetails","error","message","className","children","onClick","show","onClose","onSubmit","value","onChange","e","target","map","type"],"sources":["/Users/jerometh/PycharmProjects/LivingStones/frontend/src/components/CreateGame/CreateGame.jsx"],"sourcesContent":["// CreateGame.jsx\nimport React, {useEffect, useState} from 'react';\nimport {useNavigate} from 'react-router-dom';\nimport Modal from \"../Elements/Modal\"\nimport Panel from \"../Elements/Panel\";\nimport \"./CreateGame.css\"\nimport Header from \"../Header/Header\";\nimport Footer from \"../Elements/Footer\";\n\nconst CreateGame = () => {\n    const [npcName, setNPCName] = useState('');\n    const [showModal, setShowModal] = useState(false);\n    const [bloodLevel, setBloodLevel] = useState('');\n    const navigate = useNavigate();\n\n    const [npcList, setNPCList] = useState([]);\n    const [selectedNPC, setSelectedNPC] = useState(null);\n\n    useEffect(() => {\n        const fetchNPCs = async () => {\n            const response = await fetch(window.location.origin + '/livingstonesapp/npcs');\n            const data = await response.json();\n            console.log(data);\n            setNPCList(data);\n        };\n        fetchNPCs();\n    }, []);\n\n\n    const createGame = async (event) => {\n        event.preventDefault();\n        const token = sessionStorage.getItem('token'); // Retrieve the JWT token\n        console.log(token)\n        const response = await fetch(window.location.origin + '/livingstonesapp/create-game', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`,\n            },\n            body: JSON.stringify({\n                npc: {\n                    name: npcName,\n                    current_blood: bloodLevel,\n                },\n            }),\n        });\n\n        if (response.ok) {\n            const data = await response.json();\n            navigate(`/game/${data.id}/join`);\n        } else {\n            const errorDetails = await response.json();\n            console.error('Error in creating game:', errorDetails.message);\n        }\n        console.log('Game created:', {npcName, bloodLevel});\n        setShowModal(false);\n\n    };\n\n    return (\n        <div className={\"create-game-container\"}>\n            <Header/>\n            <button className={\"button-large\"} onClick={() => setShowModal(true)}>Create Game</button>\n            <Modal show={showModal} onClose={() => setShowModal(false)}>\n                <form onSubmit={createGame}>\n                    <div>\n                        <label>\n                            Select NPC:\n                            <select\n                                value={selectedNPC}\n                                onChange={(e) => setSelectedNPC(e.target.value)}\n                            >\n                                <option value=\"\">Select an NPC</option>\n                                {npcList.map((npc) => (\n                                    <option key={npc.id} value={npc.id}>\n                                        {npc.name} (Blood Level: {npc.current_blood})\n                                    </option>\n                                ))}\n                            </select>\n                        </label>\n                    </div>\n                    <button type=\"submit\">Create Game</button>\n                </form>\n            </Modal>\n            <Footer/>\n        </div>\n    );\n};\n\nexport default CreateGame;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}